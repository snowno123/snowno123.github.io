---
layout: page
title: Search
permalink: /search/
---

<h1>Search</h1>
<input type="text" id="searchBox" placeholder="Search postsâ€¦" />
<ul id="results"></ul>

<script src="/assets/js/lunr.min.js"></script>

<script>
fetch('/search.json')
  .then(r => r.json())
  .then(data => {
    window.posts = data.posts;

    // Build Lunr index
    window.idx = lunr(function () {
      this.ref('url');
      this.field('title');
      this.field('content');

      posts.forEach(post => this.add(post));
    });
  });

document.getElementById('searchBox').addEventListener('input', function () {
  const query = this.value;
  const results = window.idx.search(query);
  const list = document.getElementById('results');

  list.innerHTML = '';

  results.forEach(result => {
    const post = window.posts.find(p => p.url === result.ref);
    const li = document.createElement('li');
    li.innerHTML = `<a href="${post.url}">${post.title}</a>`;
    list.appendChild(li);
  });

  if (query.length > 0 && results.length === 0) {
    list.innerHTML = '<li>No results.</li>';
  }
});
</script>
